import{V as ye,j as me,l as ge,s as xe,k as Se,N as Ne,e as re}from"./Popover.3af6d985.js";import{z as I,p as s,D as $,A as v,h as O,E as Q,T as Re,G as te,M as ke,C as D,B as Pe}from"./vendor.f9e4f91a.js";import{l as X,t as E,w as Ke,a as m,c as Z,d as N,C as ee,b as P,f as Ie,u as ie,n as oe,h as Ce,g as K}from"./Space.cb2e4e91.js";import{a as De}from"./index.c0ca19c9.js";import{r as B,h as $e,f as _e,u as ze,c as Ae}from"./fade-in-scale-up.cssr.5d9a3f22.js";import{N as Oe,u as Te}from"./Icon.54169ce7.js";import{C as Fe}from"./ChevronRight.fb8aca55.js";import{a as Me}from"./light.5a0159f0.js";function ro(e,r=[],d){const t={};return Object.getOwnPropertyNames(e).forEach(u=>{r.includes(u)||(t[u]=e[u])}),Object.assign(t,d)}function je(e){return r=>{r?e.value=r.$el:e.value=null}}var de=I({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return s("div",{class:`${this.clsPrefix}-dropdown-divider`})}});const Y=X("n-dropdown-menu"),H=X("n-dropdown"),ne=X("n-dropdown-option");function J(e,r){return e.type==="submenu"||e.type===void 0&&e[r]!==void 0}function Ee(e){return e.type==="group"}function ae(e){return e.type==="divider"}function Be(e){return e.type==="render"}var le=I({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object},setup(e){const r=$(H),{hoverKeyRef:d,keyboardKeyRef:t,lastToggledSubmenuKeyRef:o,pendingKeyPathRef:u,activeKeyPathRef:p,animatedRef:f,mergedShowRef:w,renderLabelRef:b,renderIconRef:g,labelFieldRef:_,childrenFieldRef:T}=r,C=$(ne,null),z=$(Y),F=v(()=>e.tmNode.rawNode),x=v(()=>{const{value:n}=T;return J(e.tmNode.rawNode,n)}),L=v(()=>{const{disabled:n}=e.tmNode;return n}),U=v(()=>{if(!x.value)return!1;const{key:n,disabled:i}=e.tmNode;if(i)return!1;const{value:l}=d,{value:h}=t,{value:y}=o,{value:k}=u;return l!==null?k.includes(n):h!==null?k.includes(n)&&k[k.length-1]!==n:y!==null?k.includes(n):!1}),q=v(()=>t.value===null&&!f.value),G=De(U,300,q),V=v(()=>!!(C!=null&&C.enteringSubmenuRef.value)),A=O(!1);Q(ne,{enteringSubmenuRef:A});function W(){A.value=!0}function M(){A.value=!1}function R(){const{parentKey:n,tmNode:i}=e;!w.value||(o.value=n,t.value=null,d.value=i.key)}function j(){const{tmNode:n}=e;!w.value||d.value!==n.key&&R()}function S(n){if(!w.value)return;const{relatedTarget:i}=n;i&&!$e({target:i},"dropdownOption")&&(d.value=null)}function a(){const{value:n}=x,{tmNode:i}=e;!w.value||!n&&!i.disabled&&(r.doSelect(i.key,i.rawNode),r.doUpdateShow(!1))}return{labelField:_,renderLabel:b,renderIcon:g,siblingHasIcon:z.showIconRef,siblingHasSubmenu:z.hasSubmenuRef,animated:f,mergedShowSubmenu:v(()=>G.value&&!V.value),rawNode:F,hasSubmenu:x,pending:E(()=>{const{value:n}=u,{key:i}=e.tmNode;return n.includes(i)}),childActive:E(()=>{const{value:n}=p,{key:i}=e.tmNode,l=n.findIndex(h=>i===h);return l===-1?!1:l<n.length-1}),active:E(()=>{const{value:n}=p,{key:i}=e.tmNode,l=n.findIndex(h=>i===h);return l===-1?!1:l===n.length-1}),mergedDisabled:L,handleClick:a,handleMouseMove:j,handleMouseEnter:R,handleMouseLeave:S,handleSubmenuBeforeEnter:W,handleSubmenuAfterEnter:M}},render(){var e;const{animated:r,rawNode:d,mergedShowSubmenu:t,clsPrefix:o,siblingHasIcon:u,siblingHasSubmenu:p,renderLabel:f,renderIcon:w,props:b}=this,g=t?s(se,{clsPrefix:o,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}):null,_={class:[`${o}-dropdown-option-body`,this.pending&&`${o}-dropdown-option-body--pending`,this.active&&`${o}-dropdown-option-body--active`,this.childActive&&`${o}-dropdown-option-body--child-active`,this.mergedDisabled&&`${o}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick};return s("div",{class:`${o}-dropdown-option`},s("div",te(_,b),[s("div",{"data-dropdown-option":!0,class:[`${o}-dropdown-option-body__prefix`,u&&`${o}-dropdown-option-body__prefix--show-icon`]},[w?w(d):B(d.icon)]),s("div",{"data-dropdown-option":!0,class:`${o}-dropdown-option-body__label`},f?f(d):B((e=d[this.labelField])!==null&&e!==void 0?e:d.title)),s("div",{"data-dropdown-option":!0,class:[`${o}-dropdown-option-body__suffix`,p&&`${o}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?s(Oe,null,{default:()=>s(Fe,null)}):null)]),this.hasSubmenu?s(ye,null,{default:()=>[s(me,null,{default:()=>s("div",{class:`${o}-dropdown-offset-container`},s(ge,{show:this.mergedShowSubmenu,placement:this.placement,teleportDisabled:!0},{default:()=>s("div",{class:`${o}-dropdown-menu-wrapper`},r?s(Re,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>g}):g)}))})]}):null)}}),He=I({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:e,hasSubmenuRef:r}=$(Y),{renderLabelRef:d,labelFieldRef:t}=$(H);return{labelField:t,showIcon:e,hasSubmenu:r,renderLabel:d}},render(){var e;const{clsPrefix:r,hasSubmenu:d,showIcon:t,renderLabel:o}=this,{rawNode:u}=this.tmNode;return s("div",{class:`${r}-dropdown-option`},s("div",{class:`${r}-dropdown-option-body ${r}-dropdown-option-body--group`},s("div",{"data-dropdown-option":!0,class:[`${r}-dropdown-option-body__prefix`,t&&`${r}-dropdown-option-body__prefix--show-icon`]},B(u.icon)),s("div",{class:`${r}-dropdown-option-body__label`,"data-dropdown-option":!0},o?o(u):B((e=u.title)!==null&&e!==void 0?e:u[this.labelField])),s("div",{class:[`${r}-dropdown-option-body__suffix`,d&&`${r}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})))}}),Le=I({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:e,parentKey:r,clsPrefix:d}=this,{children:t}=e;return s(ke,null,s(He,{clsPrefix:d,tmNode:e,key:e.key}),t==null?void 0:t.map(o=>ae(o.rawNode)?s(de,{clsPrefix:d,key:o.key}):o.isGroup?(Ke("dropdown","`group` node is not allowed to be put in `group` node."),null):s(le,{clsPrefix:d,tmNode:o,parentKey:r,key:o.key})))}}),Ue=I({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:e,props:r}}=this.tmNode;return s("div",r,[e==null?void 0:e()])}}),se=I({name:"DropdownMenu",props:{showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(e){const{renderIconRef:r,childrenFieldRef:d}=$(H);Q(Y,{showIconRef:v(()=>{const t=r.value;return e.tmNodes.some(o=>{var u;if(o.isGroup)return(u=o.children)===null||u===void 0?void 0:u.some(({rawNode:f})=>t?t(f):f.icon);const{rawNode:p}=o;return t?t(p):p.icon})}),hasSubmenuRef:v(()=>{const{value:t}=d;return e.tmNodes.some(o=>{var u;if(o.isGroup)return(u=o.children)===null||u===void 0?void 0:u.some(({rawNode:f})=>J(f,t));const{rawNode:p}=o;return J(p,t)})})})},render(){const{parentKey:e,clsPrefix:r}=this;return s("div",{class:`${r}-dropdown-menu`},this.tmNodes.map(d=>{const{rawNode:t}=d;return Be(t)?s(Ue,{tmNode:d,key:d.key}):ae(t)?s(de,{clsPrefix:r,key:d.key}):Ee(t)?s(Le,{clsPrefix:r,tmNode:d,parentKey:e,key:d.key}):s(le,{clsPrefix:r,tmNode:d,parentKey:e,key:d.key,props:t.props})}),this.showArrow?xe({clsPrefix:r,arrowStyle:this.arrowStyle}):null)}}),qe=m("dropdown-menu",`
 transform-origin: inherit;
 padding: var(--n-padding);
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
`,[_e(),m("dropdown-option",`
 position: relative;
 `,[Z("a",`
 text-decoration: none;
 color: inherit;
 `,[Z("&::before",`
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),m("dropdown-option-body",`
 display: flex;
 cursor: pointer;
 height: var(--n-option-height);
 line-height: var(--n-option-height);
 font-size: var(--n-font-size);
 color: var(--n-option-text-color);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `,[N("pending",[ee("disabled",{color:"var(--n-option-text-color-hover)",backgroundColor:"var(--n-option-color-hover)"}),P("prefix, suffix",{color:"var(--n-option-text-color-hover)"})]),N("active",[ee("disabled",{color:"var(--n-option-text-color-active)",backgroundColor:"var(--n-option-color-active)"}),P("prefix, suffix",{color:"var(--n-option-text-color-active)"})]),N("disabled",{cursor:"not-allowed",opacity:"var(--n-option-opacity-disabled)"}),N("child-active",{color:"var(--n-option-text-color-child-active)"},[P("prefix, suffix",{color:"var(--n-option-text-color-child-active)"})]),N("group",{fontSize:"calc(var(--n-font-size) - 1px)",color:"var(--n-group-header-text-color)"},[P("prefix",{width:"calc(var(--n-option-prefix-width) / 2)"},[N("show-icon",{width:"calc(var(--n-option-icon-prefix-width) / 2)"})])]),P("prefix",`
 width: var(--n-option-prefix-width);
 display: flex;
 justify-content: center;
 align-items: center;
 color: var(--n-prefix-color);
 transition: color .3s var(--n-bezier);
 `,[N("show-icon",{width:"var(--n-option-icon-prefix-width)"}),m("icon",{fontSize:"var(--n-option-icon-size)"})]),P("label",{whiteSpace:"nowrap",flex:1}),P("suffix",`
 box-sizing: border-box;
 flex-grow: 0;
 flex-shrink: 0;
 display: flex;
 justify-content: flex-end;
 align-items: center;
 min-width: var(--n-option-suffix-width);
 padding: 0 8px;
 transition: color .3s var(--n-bezier);
 color: var(--n-suffix-color);
 `,[N("has-submenu",{width:"var(--n-option-icon-suffix-width)"}),m("icon",{fontSize:"var(--n-option-icon-size)"})]),m("dropdown-menu",{pointerEvents:"all"})]),m("dropdown-offset-container",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: -4px;
 bottom: -4px;
 `)]),m("dropdown-divider",`
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-divider-color);
 height: 1px;
 margin: 4px 0;
 `),m("dropdown-menu-wrapper",`
 transform-origin: inherit;
 width: fit-content;
 `)]);const Ge={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},showArrow:Boolean,renderLabel:Function,renderIcon:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},Ve=Object.keys(re),We=Object.assign(Object.assign(Object.assign({},re),Ge),ie.props);var to=I({name:"Dropdown",inheritAttrs:!1,props:We,setup(e){const r=O(!1),d=Te(D(e,"show"),r),t=v(()=>{const{keyField:a,childrenField:n}=e;return Ae(e.options,{getKey(i){return i[a]},getDisabled(i){return i.disabled===!0},getIgnored(i){return i.type==="divider"||i.type==="render"},getChildren(i){return i[n]}})}),o=v(()=>t.value.treeNodes),u=O(null),p=O(null),f=O(null),w=v(()=>{var a,n,i;return(i=(n=(a=u.value)!==null&&a!==void 0?a:p.value)!==null&&n!==void 0?n:f.value)!==null&&i!==void 0?i:null}),b=v(()=>t.value.getPath(w.value).keyPath),g=v(()=>t.value.getPath(e.value).keyPath),_=E(()=>e.keyboard&&d.value);ze({keydown:{ArrowUp:{prevent:!0,handler:V},ArrowRight:{prevent:!0,handler:G},ArrowDown:{prevent:!0,handler:A},ArrowLeft:{prevent:!0,handler:q},Escape:U},keyup:{Enter:W}},_);const{mergedClsPrefixRef:T,inlineThemeDisabled:C}=Ie(e),z=ie("Dropdown","-dropdown",qe,Me,e,T);Q(H,{labelFieldRef:D(e,"labelField"),childrenFieldRef:D(e,"childrenField"),renderLabelRef:D(e,"renderLabel"),renderIconRef:D(e,"renderIcon"),hoverKeyRef:u,keyboardKeyRef:p,lastToggledSubmenuKeyRef:f,pendingKeyPathRef:b,activeKeyPathRef:g,animatedRef:D(e,"animated"),mergedShowRef:d,doSelect:F,doUpdateShow:x}),Pe(d,a=>{a||L()});function F(a,n){const{onSelect:i}=e;i&&oe(i,a,n)}function x(a){const{"onUpdate:show":n}=e;n&&oe(n,a),r.value=a}function L(){u.value=null,p.value=null,f.value=null}function U(){x(!1)}function q(){R("left")}function G(){R("right")}function V(){R("up")}function A(){R("down")}function W(){const a=M();a!=null&&a.isLeaf&&(F(a.key,a.rawNode),x(!1))}function M(){var a;const{value:n}=t,{value:i}=w;return!n||i===null?null:(a=n.getNode(i))!==null&&a!==void 0?a:null}function R(a){const{value:n}=w,{value:{getFirstAvailableNode:i}}=t;let l=null;if(n===null){const h=i();h!==null&&(l=h.key)}else{const h=M();if(h){let y;switch(a){case"down":y=h.getNext();break;case"up":y=h.getPrev();break;case"right":y=h.getChild();break;case"left":y=h.getParent();break}y&&(l=y.key)}}l!==null&&(u.value=null,p.value=l)}const j=v(()=>{const{size:a,inverted:n}=e,{common:{cubicBezierEaseInOut:i},self:l}=z.value,{padding:h,dividerColor:y,borderRadius:k,optionOpacityDisabled:ue,[K("optionIconSuffixWidth",a)]:ce,[K("optionSuffixWidth",a)]:pe,[K("optionIconPrefixWidth",a)]:fe,[K("optionPrefixWidth",a)]:he,[K("fontSize",a)]:ve,[K("optionHeight",a)]:we,[K("optionIconSize",a)]:be}=l,c={"--n-bezier":i,"--n-font-size":ve,"--n-padding":h,"--n-border-radius":k,"--n-option-height":we,"--n-option-prefix-width":he,"--n-option-icon-prefix-width":fe,"--n-option-suffix-width":pe,"--n-option-icon-suffix-width":ce,"--n-option-icon-size":be,"--n-divider-color":y,"--n-option-opacity-disabled":ue};return n?(c["--n-color"]=l.colorInverted,c["--n-option-color-hover"]=l.optionColorHoverInverted,c["--n-option-color-active"]=l.optionColorActiveInverted,c["--n-option-text-color"]=l.optionTextColorInverted,c["--n-option-text-color-hover"]=l.optionTextColorHoverInverted,c["--n-option-text-color-active"]=l.optionTextColorActiveInverted,c["--n-option-text-color-child-active"]=l.optionTextColorChildActiveInverted,c["--n-prefix-color"]=l.prefixColorInverted,c["--n-suffix-color"]=l.suffixColorInverted,c["--n-group-header-text-color"]=l.groupHeaderTextColorInverted):(c["--n-color"]=l.color,c["--n-option-color-hover"]=l.optionColorHover,c["--n-option-color-active"]=l.optionColorActive,c["--n-option-text-color"]=l.optionTextColor,c["--n-option-text-color-hover"]=l.optionTextColorHover,c["--n-option-text-color-active"]=l.optionTextColorActive,c["--n-option-text-color-child-active"]=l.optionTextColorChildActive,c["--n-prefix-color"]=l.prefixColor,c["--n-suffix-color"]=l.suffixColor,c["--n-group-header-text-color"]=l.groupHeaderTextColor),c}),S=C?Ce("dropdown",v(()=>`${e.size[0]}${e.inverted?"i":""}`),j,e):void 0;return{mergedClsPrefix:T,mergedTheme:z,tmNodes:o,mergedShow:d,doUpdateShow:x,cssVars:C?void 0:j,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender}},render(){const e=(t,o,u,p,f)=>{var w;const{mergedClsPrefix:b}=this;(w=this.onRender)===null||w===void 0||w.call(this);const g={ref:je(o),class:[t,`${b}-dropdown`,this.themeClass,this.trigger==="manual"&&`${b}-popover--manual-trigger`,this.showArrow&&`${b}-popover--show-arrow`],clsPrefix:b,tmNodes:this.tmNodes,style:[u,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,onMouseenter:p,onMouseleave:f};return s(se,te(this.$attrs,g))},{mergedTheme:r}=this,d={show:this.mergedShow,theme:r.peers.Popover,themeOverrides:r.peerOverrides.Popover,internalRenderBody:e,onUpdateShow:this.doUpdateShow};return s(Ne,Object.assign({},Se(this.$props,Ve),d),{trigger:()=>{var t,o;return(o=(t=this.$slots).default)===null||o===void 0?void 0:o.call(t)}})}});export{to as N,ro as o};
