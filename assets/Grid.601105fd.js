import{l as V,s as G,f as A,t as _,v as P,x as L}from"./Space.5f8f31c2.js";import{k as Q,V as q}from"./Icon.5554db87.js";import{A as S,h as N,y as D,z as I,D as T,p as $,K as z,E as F,C as X,F as U,G as Y}from"./vendor.43ce0c4d.js";import{i as H,b as J}from"./Popover.2d9bbfec.js";function W(e){if(typeof e=="number")return{"":e.toString()};const s={};return e.split(/ +/).forEach(a=>{if(a==="")return;const[r,t]=a.split(":");t===void 0?s[""]=r:s[r]=t}),s}function y(e,s){var a;if(e==null)return;const r=W(e);if(s===void 0)return r[""];if(typeof s=="string")return(a=r[s])!==null&&a!==void 0?a:r[""];if(Array.isArray(s)){for(let t=s.length-1;t>=0;--t){const n=s[t];if(n in r)return r[n]}return r[""]}else{let t,n=-1;return Object.keys(r).forEach(i=>{const o=Number(i);!Number.isNaN(o)&&s>=o&&o>=n&&(n=o,t=r[i])}),t}}const Z={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function K(e){return`(min-width: ${e}px)`}const b={};function ee(e=Z){if(!H)return S(()=>[]);if(typeof window.matchMedia!="function")return S(()=>[]);const s=N({}),a=Object.keys(e),r=(t,n)=>{t.matches?s.value[n]=!0:s.value[n]=!1};return a.forEach(t=>{const n=e[t];let i,o;b[n]===void 0?(i=window.matchMedia(K(n)),i.addEventListener?i.addEventListener("change",f=>{o.forEach(d=>{d(f,t)})}):i.addListener&&i.addListener(f=>{o.forEach(d=>{d(f,t)})}),o=new Set,b[n]={mql:i,cbs:o}):(i=b[n].mql,o=b[n].cbs),o.add(r),i.matches&&o.forEach(f=>{f(i,t)})}),D(()=>{a.forEach(t=>{const{cbs:n}=b[e[t]];n.has(r)&&n.delete(r)})}),S(()=>{const{value:t}=s;return a.filter(n=>t[n])})}const B=1,k=V("n-grid"),M=1,j={span:{type:[Number,String],default:M},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},ae=Q(j);var le=I({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:j,setup(){const{xGapRef:e,itemStyleRef:s,overflowRef:a}=T(k),r=z();return{overflow:a,itemStyle:s,deriveStyle:()=>{const{privateSpan:t=M,privateShow:n=!0,privateColStart:i=void 0,privateOffset:o=0}=r.vnode.props,{value:f}=e,d=G(f||0);return{display:n?"":"none",gridColumn:`${i!=null?i:`span ${t}`} / span ${t}`,marginLeft:o?`calc((100% - (${t} - 1) * ${d}) / ${t} * ${o} + ${d} * ${o})`:""}}}},render(){var e,s;return $("div",{style:[this.itemStyle,this.deriveStyle()]},(s=(e=this.$slots).default)===null||s===void 0?void 0:s.call(e,{overflow:this.overflow}))}});const te={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},O=24,se={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:O},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}};var fe=I({name:"Grid",inheritAttrs:!1,props:se,setup(e){const{mergedClsPrefixRef:s,mergedBreakpointsRef:a}=A(e),r=/^\d+$/,t=N(void 0),n=ee((a==null?void 0:a.value)||te),i=_(()=>!!(e.itemResponsive||!r.test(e.cols.toString())||!r.test(e.xGap.toString())||!r.test(e.yGap.toString()))),o=S(()=>{if(!!i.value)return e.responsive==="self"?t.value:n.value}),f=_(()=>{var u;return(u=Number(y(e.cols.toString(),o.value)))!==null&&u!==void 0?u:O}),d=_(()=>y(e.xGap.toString(),o.value)),C=_(()=>y(e.yGap.toString(),o.value)),v=u=>{t.value=u.contentRect.width},w=u=>{J(v,u)},m=N(!1),p=S(()=>{if(e.responsive==="self")return w});return F(k,{itemStyleRef:X(e,"itemStyle"),xGapRef:d,overflowRef:m}),{mergedClsPrefix:s,style:S(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${f.value}, minmax(0, 1fr))`,columnGap:G(d.value),rowGap:G(C.value)})),isResponsive:i,responsiveQuery:o,responsiveCols:f,handleResize:p,overflow:m}},render(){const e=()=>{var s,a,r,t,n,i;this.overflow=!1;const o=P(L(this)),f=[],{collapsed:d,collapsedRows:C,responsiveCols:v,responsiveQuery:w}=this;o.forEach(l=>{var R,h,c;if(((R=l==null?void 0:l.type)===null||R===void 0?void 0:R.__GRID_ITEM__)!==!0)return;const g=U(l),E=Number((c=y((h=g.props)===null||h===void 0?void 0:h.span,w))!==null&&c!==void 0?c:B);E!==0&&f.push({child:g,rawChildSpan:E})});let m=0;const p=(s=f[f.length-1])===null||s===void 0?void 0:s.child;if(p!=null&&p.props){const l=(a=p.props)===null||a===void 0?void 0:a.suffix;l!==void 0&&l!==!1&&(m=(t=(r=p.props)===null||r===void 0?void 0:r.span)!==null&&t!==void 0?t:B,p.props.privateSpan=m,p.props.privateColStart=v+1-m,p.props.privateShow=!0)}let u=0,x=!1;for(const{child:l,rawChildSpan:R}of f){if(x&&(this.overflow=!0),!x){const h=Number((i=y((n=l.props)===null||n===void 0?void 0:n.offset,w))!==null&&i!==void 0?i:0),c=Math.min(R+h,v)||1;if(l.props?(l.props.privateSpan=c,l.props.privateOffset=h):l.props={privateSpan:c,privateOffset:h},d){const g=u%v;c+g>v&&(u+=v-g),c+u+m>C*v?x=!0:u+=c}}x&&(l.props?l.props.privateShow!==!0&&(l.props.privateShow=!1):l.props={privateShow:!1})}return $("div",Y({class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),f.map(({child:l})=>l))};return this.isResponsive&&this.responsive==="self"?$(q,{onResize:this.handleResize},{default:e}):e()}});export{fe as N,le as a,j as b,ae as g};
